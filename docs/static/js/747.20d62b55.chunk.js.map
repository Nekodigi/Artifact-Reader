{"version":3,"file":"static/js/747.20d62b55.chunk.js","mappings":"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","sources":["utils/func/string.ts","utils/consts/Artifact.ts","utils/consts/Stat.ts","utils/func/strToArtifact.ts","utils/func/artifactScan.ts","components/template/TemplateMatching.tsx"],"sourcesContent":["export const similarity = (s1: string, s2: string) => {\r\n  var longer = s1;\r\n  var shorter = s2;\r\n  if (s1.length < s2.length) {\r\n    longer = s2;\r\n    shorter = s1;\r\n  }\r\n  var longerLength = longer.length;\r\n  if (longerLength == 0) {\r\n    return 1.0;\r\n  }\r\n  return (longerLength - editDistance(longer, shorter)) / longerLength;\r\n};\r\n\r\nexport const editDistance = (s1: string, s2: string) => {\r\n  s1 = s1.toLowerCase();\r\n  s2 = s2.toLowerCase();\r\n\r\n  var costs = new Array();\r\n  for (var i = 0; i <= s1.length; i++) {\r\n    var lastValue = i;\r\n    for (var j = 0; j <= s2.length; j++) {\r\n      if (i == 0) costs[j] = j;\r\n      else {\r\n        if (j > 0) {\r\n          var newValue = costs[j - 1];\r\n          if (s1.charAt(i - 1) != s2.charAt(j - 1))\r\n            newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;\r\n          costs[j - 1] = lastValue;\r\n          lastValue = newValue;\r\n        }\r\n      }\r\n    }\r\n    if (i > 0) costs[s2.length] = lastValue;\r\n  }\r\n  return costs[s2.length];\r\n};\r\n\r\nexport const isAlphabet = (char: string) => {\r\n  return \"A\" <= char && char <= \"z\";\r\n};\r\n","export const setKey = [\r\n  \"Adventurer\", //Adventurer\r\n  \"ArchaicPetra\", //Archaic Petra\r\n  \"Berserker\", //Berserker\r\n  \"BlizzardStrayer\", //Blizzard Strayer\r\n  \"BloodstainedChivalry\", //Bloodstained Chivalry\r\n  \"BraveHeart\", //Brave Heart\r\n  \"CrimsonWitchOfFlames\", //Crimson Witch of Flames\r\n  \"DeepwoodMemories\", //Deepwood Memories\r\n  \"DefendersWill\", //Defender's Will\r\n  \"DesertPavilionChronicle\", //Desert Pavilion Chronicle\r\n  \"EchoesOfAnOffering\", //Echoes of an Offering\r\n  \"EmblemOfSeveredFate\", //Emblem of Severed Fate\r\n  \"FlowerOfParadiseLost\", //Flower of Paradise Lost\r\n  \"Gambler\", //Gambler\r\n  \"GildedDreams\", //Gilded Dreams\r\n  \"GladiatorsFinale\", //Gladiator's Finale\r\n  \"HeartOfDepth\", //Heart of Depth\r\n  \"HuskOfOpulentDreams\", //Husk of Opulent Dreams\r\n  \"Instructor\", //Instructor\r\n  \"Lavawalker\", //Lavawalker\r\n  \"LuckyDog\", //Lucky Dog\r\n  \"MaidenBeloved\", //Maiden Beloved\r\n  \"MartialArtist\", //Martial Artist\r\n  \"NoblesseOblige\", //Noblesse Oblige\r\n  \"OceanHuedClam\", //Ocean-Hued Clam\r\n  \"PaleFlame\", //Pale Flame\r\n  \"PrayersForDestiny\", //Prayers for Destiny\r\n  \"PrayersForIllumination\", //Prayers for Illumination\r\n  \"PrayersForWisdom\", //Prayers for Wisdom\r\n  \"PrayersToSpringtime\", //Prayers to Springtime\r\n  \"ResolutionOfSojourner\", //Resolution of Sojourner\r\n  \"RetracingBolide\", //Retracing Bolide\r\n  \"Scholar\", //Scholar\r\n  \"ShimenawasReminiscence\", //Shimenawa's Reminiscence\r\n  \"TenacityOfTheMillelith\", //Tenacity of the Millelith\r\n  \"TheExile\", //The Exile\r\n  \"ThunderingFury\", //Thundering Fury\r\n  \"Thundersoother\", //Thundersoother\r\n  \"TinyMiracle\", //Tiny Miracle\r\n  \"TravelingDoctor\", //Traveling Doctor\r\n  \"VermillionHereafter\", //Vermillion Hereafter\r\n  \"ViridescentVenerer\", //Viridescent Venerer\r\n  \"WanderersTroupe\",\r\n] as const;\r\nexport type setKeyType = typeof setKey[number];\r\n\r\nexport const slotKey = [\r\n  \"flower\",\r\n  \"plume\",\r\n  \"sands\",\r\n  \"goblet\",\r\n  \"circlet\",\r\n] as const;\r\nexport type slotKeyType = typeof slotKey[number];\r\n\r\n//Wanderer's Troupe\r\n//   Adventurer: { name: { en: \"Adventurer\", ja: \"\" } },\r\n//   ArchaicPetra: { name: { en: \"Archaic Petra\", ja: \"\" } },\r\n//   Berserker: { name: { en: \"Berserker\", ja: \"\" } },\r\n//   BlizzardStrayer: { name: { en: \"Blizzard Strayer\", ja: \"\" } },\r\n//   BloodstainedChivalry: { name: { en: \"Bloodstained Chivalry\", ja: \"\" } },\r\n//   BraveHeart: { name: { en: \"Brave Heart\", ja: \"\" } },\r\n//   CrimsonWitchOfFlames: { name: { en: \"Crimson Witch of Flames\", ja: \"\" } },\r\n//   DeepwoodMemories: { name: { en: \"Deepwood Memories\", ja: \"\" } },\r\n//   DefendersWill: { name: { en: \"Defender's Will\", ja: \"\" } },\r\n//   DesertPavilionChronicle: {\r\n//     name: { en: \"Desert Pavilion Chronicle\", ja: \"\" },\r\n//   },\r\n//   EchoesOfAnOffering: { name: { en: \"Echoes of an Offering\", ja: \"\" } },\r\n//   EmblemOfSeveredFate: { name: { en: \"Emblem of Severed Fate\", ja: \"\" } },\r\n//   FlowerOfParadiseLost: { name: { en: \"Flower of Paradise Lost\", ja: \"\" } },\r\n//   Gambler: { name: { en: \"Gambler\", ja: \"\" } },\r\n//   GildedDreams: { name: { en: \"Gilded Dreams\", ja: \"\" } },\r\n//   GladiatorsFinale: { name: { en: \"Gladiator's Finale\", ja: \"\" } },\r\n//   HeartOfDepth: { name: { en: \"Heart of Depth\", ja: \"\" } },\r\n//   HuskOfOpulentDreams: { name: { en: \"Husk of Opulent Dreams\", ja: \"\" } },\r\n//   Instructor: { name: { en: \"Instructor\", ja: \"\" } },\r\n//   Lavawalker: { name: { en: \"Lavawalker\", ja: \"\" } },\r\n//   LuckyDog: { name: { en: \"Lucky Dog\", ja: \"\" } },\r\n//   MaidenBeloved: { name: { en: \"Maiden Beloved\", ja: \"\" } },\r\n//   MartialArtist: { name: { en: \"Martial Artist\", ja: \"\" } },\r\n//   NoblesseOblige: { name: { en: \"Noblesse Oblige\", ja: \"\" } },\r\n//   OceanHuedClam: { name: { en: \"Ocean-Hued Clam\", ja: \"\" } },\r\n//   PaleFlame: { name: { en: \"Pale Flame\", ja: \"\" } },\r\n//   PrayersForDestiny: { name: { en: \"Prayers for Destiny\", ja: \"\" } },\r\n//   PrayersForIllumination: { name: { en: \"Prayers for Illumination\", ja: \"\" } },\r\n//   PrayersForWisdom: { name: { en: \"Prayers for Wisdom\", ja: \"\" } },\r\n//   PrayersToSpringtime: { name: { en: \"Prayers to Springtime\", ja: \"\" } },\r\n//   ResolutionOfSojourner: { name: { en: \"Resolution of Sojourner\", ja: \"\" } },\r\n//   RetracingBolide: { name: { en: \"Retracing Bolide\", ja: \"\" } },\r\n//   Scholar: { name: { en: \"Scholar\", ja: \"\" } },\r\n//   ShimenawasReminiscence: { name: { en: \"Shimenawa's Reminiscence\", ja: \"\" } },\r\n//   TenacityOfTheMillelith: { name: { en: \"Tenacity of the Millelith\", ja: \"\" } },\r\n//   TheExile: { name: { en: \"The Exile\", ja: \"\" } },\r\n//   ThunderingFury: { name: { en: \"Thundering Fury\", ja: \"\" } },\r\n//   Thundersoother: { name: { en: \"Thundersoother\", ja: \"\" } },\r\n//   TinyMiracle: { name: { en: \"Tiny Miracle\", ja: \"\" } },\r\n//   TravelingDoctor: { name: { en: \"Traveling Doctor\", ja: \"\" } },\r\n//   VermillionHereafter: { name: { en: \"Vermillion Hereafter\", ja: \"\" } },\r\n//   ViridescentVenerer: { name: { en: \"Viridescent Venerer\", ja: \"\" } },\r\n//   WanderersTroupe: { name: { en: \"Wanderer's Troupe\", ja: \"\" } },\r\n// };\r\n","//table can be replaced by min and step?\r\n\r\nconst statDef = {\r\n  hp: {\r\n    weight: 0,\r\n    abri: \"HP \",\r\n    name: { en: \"HP\", ja: \"HP\" },\r\n    table: [209.13, 239.0, 268.88, 298.75],\r\n  },\r\n  hp_: {\r\n    weight: 0,\r\n    name: { en: \"HP%\", ja: \"HP%\" },\r\n    abri: \"HP%\",\r\n    table: [4.08, 4.66, 5.25, 5.83],\r\n  },\r\n  atk: {\r\n    weight: 0,\r\n    name: { en: \"ATK\", ja: \"攻撃力\" },\r\n    table: [13.62, 15.56, 17.51, 19.45],\r\n  },\r\n  atk_: {\r\n    weight: 1,\r\n    name: { en: \"ATK%\", ja: \"攻撃力%\" },\r\n    table: [4.08, 4.66, 5.25, 5.83],\r\n  },\r\n  def: {\r\n    weight: 0,\r\n    name: { en: \"DEF\", ja: \"防御力\" },\r\n    table: [16.2, 18.52, 20.83, 23.15],\r\n  },\r\n  def_: {\r\n    weight: 0,\r\n    name: { en: \"DEF%\", ja: \"防御力%\" },\r\n    table: [5.1, 5.83, 6.56, 7.29],\r\n  },\r\n  eleMas: {\r\n    weight: 0,\r\n    name: { en: \"Elemental Mastery\", ja: \"元素熟知\" },\r\n    table: [16.32, 18.65, 20.98, 23.31],\r\n  },\r\n  enerRech_: {\r\n    weight: 0,\r\n    name: { en: \"Energy Recharge%\", ja: \"元素チャージ効率%\" },\r\n    table: [4.53, 5.18, 5.83, 6.48],\r\n  },\r\n  heal_: {\r\n    weight: 0,\r\n    name: { en: \"Healing Bonus\", ja: \"与える治療効果\" },\r\n    table: [4.53, 5.18, 5.83, 6.48],\r\n  },\r\n  critRate_: {\r\n    weight: 2,\r\n    name: { en: \"CRIT Rate%\", ja: \"会心率%\" },\r\n    table: [2.72, 3.11, 3.5, 3.89],\r\n  },\r\n  critDMG_: {\r\n    weight: 1,\r\n    name: { en: \"CRIT DMG%\", ja: \"会心ダメージ%\" },\r\n    table: [5.44, 6.22, 6.99, 7.77],\r\n  },\r\n\r\n  physical_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Physical DMG Bonus\", ja: \"物理ダメージバフ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  anemo_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Anemo DMG Bonus\", ja: \"風元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  geo_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Geo DMG Bonus\", ja: \"岩元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  electro_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Electro DMG Bonus\", ja: \"雷元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  hydro_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Hydro DMG Bonus\", ja: \"水元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  pyro_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Pyro DMG Bonus\", ja: \"炎元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  cryo_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Cryo DMG Bonus\", ja: \"氷元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  dendro_dmg_: {\r\n    weight: 0,\r\n    name: { en: \"Dendro DMG Bonus\", ja: \"草元素ダメージ\" },\r\n    table: [0, 0, 0, 0],\r\n  },\r\n  ERR: {\r\n    weight: 0,\r\n    name: { en: \"Substat\", ja: \"サブステータス\" },\r\n    icon: undefined,\r\n    table: [0, 0, 0, 0],\r\n  },\r\n} as const;\r\n\r\nexport { statDef };\r\n\r\nexport const statKey = [\r\n  \"hp\",\r\n  \"hp_\",\r\n  \"atk\",\r\n  \"atk_\",\r\n  \"def\",\r\n  \"def_\",\r\n  \"eleMas\",\r\n  \"enerRech_\",\r\n  \"heal_\",\r\n  \"critRate_\",\r\n  \"critDMG_\",\r\n  \"physical_dmg_\",\r\n  \"anemo_dmg_\",\r\n  \"geo_dmg_\",\r\n  \"electro_dmg_\",\r\n  \"hydro_dmg_\",\r\n  \"pyro_dmg_\",\r\n  \"cryo_dmg_\",\r\n  \"dendro_dmg_\",\r\n];\r\nexport type statKeyType = keyof typeof statDef;\r\n","import { setKey, setKeyType, slotKey, slotKeyType } from \"../consts/Artifact\";\r\nimport { similarity } from \"./string\";\r\n//import { Language } from \"genshin-db\";\r\nimport artifacts from \"../consts/genshindb-partial.json\";\r\nimport { substatKey } from \"../consts/Substat\";\r\nimport { statDef, statKey, statKeyType } from \"../consts/Stat\";\r\nimport { Language } from \"../types/Language\";\r\nimport { ArtifactDB } from \"../types/Artifact\";\r\n\r\nexport type str2artifactSetOut = {\r\n  key: setKeyType;\r\n  part: slotKeyType;\r\n  confidence: number;\r\n};\r\n\r\nexport const str2artifactSet = (\r\n  str: string,\r\n  lang: Language\r\n): str2artifactSetOut => {\r\n  let maxSim = 0;\r\n  let key_: setKeyType = \"Adventurer\";\r\n  let part_: slotKeyType = \"circlet\";\r\n\r\n  setKey.forEach((key) => {\r\n    // let a = artifacts(key, {\r\n    //   resultLanguage: lang,\r\n    // })!;\r\n    let a = artifacts[key] as ArtifactDB;\r\n    slotKey.forEach((part) => {\r\n      if (a[part] !== undefined) {\r\n        let sim = similarity(str, a[part]!.name[lang]);\r\n        if (sim > maxSim) {\r\n          key_ = key;\r\n          part_ = part;\r\n          maxSim = sim;\r\n        }\r\n      }\r\n    });\r\n  });\r\n  return { key: key_, part: part_, confidence: maxSim };\r\n};\r\n\r\nexport type str2statOut = {\r\n  key: statKeyType;\r\n  value: number;\r\n  confidence: number;\r\n};\r\n\r\nexport const str2stats = (str: string, lang: Language): str2statOut[] => {\r\n  var strs = str.split(\"\\n\");\r\n  strs = strs.filter((str_) => str_ !== \"\");\r\n  var targets = [];\r\n  for (let i = 0; i < strs.length; i++) {\r\n    let str_ = strs[i];\r\n    if (\r\n      str_.replace(/\\s/g, \"\").includes(\"Set\") ||\r\n      str_.replace(/\\s/g, \"\").includes(\"セット\")\r\n    ) {\r\n      break;\r\n    }\r\n    targets.push(str_);\r\n  }\r\n\r\n  return targets.map((str) => str2stat(str, lang));\r\n};\r\n\r\nexport const str2stat = (str: string, lang: Language): str2statOut => {\r\n  let datas = str.split(\"+\"); //plus could be lost\r\n  if (datas.length === 1) {\r\n    console.log(\"+ error\");\r\n    //could be plus detection ERROR\r\n    for (let i = 0; i < datas[0].length; i++) {\r\n      if (\"⓪①②③④⑤⑥⑦⑧⑨0123456789\".includes(datas[0][i])) {\r\n        datas[1] = datas[0].substring(i);\r\n        datas[0] = datas[0].substring(0, i);\r\n        console.log(`split at ${i} ${datas[0]} ${datas[1]}`);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  let key_ = datas[0] + (str.includes(\"%\") ? \"%\" : \"\");\r\n  var value_ = str.includes(\"%\") ? datas[1].split(\"%\")[0] : datas[1]; //10% => 10\r\n  let maxSim = 0;\r\n  let key: statKeyType = \"ERR\";\r\n\r\n  const replaceList = [\r\n    [\"⓪\", \"0\"],\r\n    [\"①\", \"1\"],\r\n    [\"②\", \"2\"],\r\n    [\"③\", \"3\"],\r\n    [\"④\", \"4\"],\r\n    [\"⑤\", \"5\"],\r\n    [\"⑥\", \"6\"],\r\n    [\"⑦\", \"7\"],\r\n    [\"⑧\", \"8\"],\r\n    [\"⑨\", \"9\"],\r\n  ];\r\n  key_ = key_.replaceAll(\" \", \"\").replaceAll(\"カ\", \"力\");\r\n  replaceList.forEach((replaceItem) => {\r\n    value_ = value_.replaceAll(replaceItem[0], replaceItem[1]);\r\n  });\r\n\r\n  if (lang === \"en\") {\r\n    statKey.forEach((key_i) => {\r\n      let sim = similarity(statDef[key_i as statKeyType].name[lang], key_);\r\n      if (sim > maxSim) {\r\n        key = key_i as statKeyType;\r\n        maxSim = sim;\r\n      }\r\n    });\r\n  } else {\r\n    console.log(str, \"JP\");\r\n    str = str.replace(/\\s/g, \"\");\r\n    //some letter could be lost.\r\n    //use nearest!\r\n    statKey.forEach((key_i) => {\r\n      let sim = similarity(statDef[key_i as statKeyType].name[lang], key_);\r\n      if (sim > maxSim) {\r\n        key = key_i as statKeyType;\r\n        maxSim = sim;\r\n      }\r\n    });\r\n  }\r\n  let value = Number(value_);\r\n\r\n  console.log(key_, value_, value, key);\r\n\r\n  statKey.forEach((key_) => {\r\n    let sim = similarity(statDef[key_ as statKeyType].name[lang], str);\r\n    if (sim > maxSim) {\r\n      key = key_ as statKeyType;\r\n      maxSim = sim;\r\n    }\r\n  });\r\n  return { key, value, confidence: maxSim };\r\n};\r\n","import cv, { MinMaxLoc, Rect } from \"@techstark/opencv-js\";\r\nimport Tesseract from \"tesseract.js\";\r\nimport { setKeyType, slotKeyType } from \"../consts/Artifact\";\r\nimport { statKeyType } from \"../consts/Stat\";\r\nimport { ArtifactType } from \"../types/Artifact\";\r\nimport { Language } from \"../types/Language\";\r\nimport { SubstatType } from \"../types/Substat\";\r\nimport { isAlphabet } from \"./string\";\r\nimport { str2artifactSet, str2stat, str2stats } from \"./strToArtifact\";\r\n\r\nexport type ArtifactScanOut = {\r\n  setKey: ScanResSetKey;\r\n  rarity: ScanResNum;\r\n  level: ScanResNum;\r\n  slotKey: ScanResSlotKey;\r\n  mainstatKey: ScanResStatKey;\r\n  substats: ScanResStat[];\r\n};\r\n\r\nexport const ScanRes2GOOD = (scanned: ArtifactScanOut) => {\r\n  return {\r\n    setKey: scanned.setKey.key,\r\n    rarity: scanned.rarity.value,\r\n    level: scanned.level.value,\r\n    slotKey: scanned.slotKey.value,\r\n    mainstatKey: scanned.mainstatKey.key,\r\n    substats: scanned.substats.map((substat) => {\r\n      return { key: substat.key, value: substat.value } as SubstatType;\r\n    }),\r\n  } as ArtifactType;\r\n};\r\n\r\nexport const ArtifactScan = async (\r\n  src: cv.Mat,\r\n  scale: number,\r\n  left: cv.Mat,\r\n  right: cv.Mat,\r\n  mid: cv.Mat,\r\n  buf: React.RefObject<HTMLCanvasElement>\r\n) => {\r\n  let strs = await ArtifactScanStr(src, scale, left, right, mid, buf);\r\n  console.log(strs);\r\n  let lang: Language = isAlphabet(strs.name.value.charAt(0)) ? \"en\" : \"ja\";\r\n  let res = {} as ArtifactScanOut;\r\n  let set = str2artifactSet(strs.name.value, lang);\r\n  res.setKey = { key: set.key, confidence: set.confidence };\r\n  res.rarity = {\r\n    value: strs.star.value.replace(/\\s/g, \"\").length,\r\n    confidence: strs.star.confidence,\r\n  };\r\n  //could compare with main stat and improve accuracy\r\n  res.level = {\r\n    value: Number(strs.level.value.replace(/^\\D+/g, \"\")),\r\n    confidence: strs.level.confidence,\r\n  };\r\n  let mainstat = str2stat(\r\n    strs.mainKey.value + \"+\" + strs.mainValue.value,\r\n    lang\r\n  );\r\n  res.mainstatKey = { key: mainstat.key, confidence: mainstat.confidence };\r\n  res.slotKey = { value: set.part, confidence: set.confidence };\r\n\r\n  res.substats = str2stats(strs.substat.value, lang);\r\n  return res;\r\n};\r\n\r\n//scale change sample size: larger precise, smaller faster\r\nexport type ArtifactScanStrOut = {\r\n  name: ScanRes;\r\n  part: ScanRes;\r\n  mainKey: ScanRes;\r\n  mainValue: ScanRes;\r\n  star: ScanRes;\r\n  level: ScanRes;\r\n  substat: ScanRes;\r\n};\r\nexport const ArtifactScanStr = async (\r\n  src_: cv.Mat,\r\n  scale: number,\r\n  left: cv.Mat,\r\n  right: cv.Mat,\r\n  mid: cv.Mat,\r\n  buf: React.RefObject<HTMLCanvasElement>\r\n) => {\r\n  let src = new cv.Mat();\r\n  src_.copyTo(src);\r\n\r\n  let res = {} as ArtifactScanStrOut;\r\n\r\n  let aspect = src.size().width / src.size().height;\r\n  cv.resize(src, src, new cv.Size(1280 * scale, (1280 * scale) / aspect)); //* RESIZE FOR FASTER RES,\r\n  console.log(src.size());\r\n  let color = new cv.Scalar(255, 0, 0, 255);\r\n\r\n  let dst = new cv.Mat();\r\n  let mask = new cv.Mat();\r\n  cv.matchTemplate(src, right, dst, cv.TM_CCOEFF_NORMED, mask);\r\n  let result = cv.minMaxLoc(dst, mask) as any as MinMaxLoc;\r\n  let maxPoint = result.maxLoc;\r\n\r\n  let point = new cv.Point(maxPoint.x + right.cols, maxPoint.y + right.rows);\r\n  cv.rectangle(src, maxPoint, point, color, 2, cv.LINE_8, 0);\r\n  console.log(\"img 0 match\");\r\n\r\n  cv.matchTemplate(src, left, dst, cv.TM_CCOEFF, mask);\r\n  result = cv.minMaxLoc(dst, mask) as any as MinMaxLoc;\r\n  let maxPoint2 = result.maxLoc;\r\n\r\n  let point2 = new cv.Point(maxPoint2.x + left.cols, maxPoint2.y + left.rows);\r\n  cv.rectangle(src, maxPoint2, point2, color, 2, cv.LINE_8, 0);\r\n  console.log(\"img 1 match\");\r\n\r\n  let slimRect = new cv.Rect(\r\n    maxPoint2.x,\r\n    0,\r\n    point.x - maxPoint2.x,\r\n    src.size().height\r\n  );\r\n  let slimImg = src.roi(slimRect);\r\n  //*RESIZE AFTER CLOP!!!!!!!!!\r\n  aspect = slimImg.size().width / slimImg.size().height;\r\n\r\n  cv.resize(slimImg, slimImg, new cv.Size(352 * scale, (352 * scale) / aspect));\r\n\r\n  cv.matchTemplate(slimImg, mid, dst, cv.TM_CCOEFF, mask);\r\n  result = cv.minMaxLoc(dst, mask) as any as MinMaxLoc;\r\n  maxPoint = result.maxLoc;\r\n\r\n  point = new cv.Point(maxPoint.x + mid.cols, maxPoint.y + mid.rows);\r\n  cv.rectangle(slimImg, maxPoint, point, color, 2, cv.LINE_8, 0);\r\n\r\n  console.log(\"slimmed\");\r\n\r\n  let midSeparator = maxPoint.y + mid.rows / 2;\r\n  let topHalfHeight = 189;\r\n  let topHalfBottom = 156;\r\n  let topHalfR = new cv.Rect(\r\n    12,\r\n    midSeparator - topHalfHeight * scale,\r\n    328 * scale,\r\n    (topHalfHeight + topHalfBottom) * scale\r\n  );\r\n  let trimmedImg = slimImg.roi(topHalfR);\r\n  cv.cvtColor(trimmedImg, trimmedImg, cv.COLOR_BGR2GRAY);\r\n\r\n  console.log(\"trimmed\");\r\n\r\n  let name1p = new cv.Point(17 * scale, 6 * scale);\r\n  let name2p = new cv.Point((17 + 295) * scale, (6 + 26) * scale);\r\n  let part1p = new cv.Point(16 * scale, 46 * scale);\r\n  let part2p = new cv.Point((16 + 130) * scale, (46 + 18) * scale);\r\n  let mainKey1p = new cv.Point(16 * scale, 100 * scale);\r\n  let mainKey2p = new cv.Point((16 + 130) * scale, (100 + 18) * scale);\r\n  let mainValue1p = new cv.Point(16 * scale, 118 * scale);\r\n  let mainValue2p = new cv.Point((16 + 102) * scale, (118 + 32) * scale);\r\n  let star1p = new cv.Point(16 * scale, 156 * scale);\r\n  let star2p = new cv.Point((16 + 116) * scale, (156 + 24) * scale);\r\n  let level1p = new cv.Point(24 * scale, 208 * scale);\r\n  let level2p = new cv.Point((24 + 32) * scale, (208 + 16) * scale);\r\n  let substat1p = new cv.Point(32 * scale, 237 * scale);\r\n  let substat2p = new cv.Point((32 + 198) * scale, (237 + 106) * scale);\r\n\r\n  console.log(\"showTextImg\");\r\n\r\n  const fname = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 0.75, -180, name1p, name2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL(), \"jpn\");\r\n    res.name = { value: result.data.text, confidence: result.data.confidence };\r\n    cv.rectangle(trimmedImg, name1p, name2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n  const fpart = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 1, -180, part1p, part2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL(), \"jpn\");\r\n    res.part = { value: result.data.text, confidence: result.data.confidence };\r\n    cv.rectangle(trimmedImg, part1p, part2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n\r\n  const fmainKey = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 1, -135, mainKey1p, mainKey2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL(), \"jpn\"); //nograyscale\r\n    res.mainKey = {\r\n      value: result.data.text,\r\n      confidence: result.data.confidence,\r\n    };\r\n    cv.rectangle(trimmedImg, mainKey1p, mainKey2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n  const fmainValue = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 0.75, -180, mainValue1p, mainValue2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL());\r\n    res.mainValue = {\r\n      value: result.data.text,\r\n      confidence: result.data.confidence,\r\n    };\r\n    cv.rectangle(trimmedImg, mainValue1p, mainValue2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n\r\n  const fstar = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 1, -150, star1p, star2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL(), \"chi_tra\");\r\n    res.star = { value: result.data.text, confidence: result.data.confidence };\r\n    cv.rectangle(trimmedImg, star1p, star2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n\r\n  const flevel = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 1, -150, level1p, level2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL()); //nograyscale\r\n    res.level = { value: result.data.text, confidence: result.data.confidence };\r\n    cv.rectangle(trimmedImg, level1p, level2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n\r\n  const fsubstat = async () => {\r\n    imshowTrimmed(buf, trimmedImg, 1, 140, substat1p, substat2p);\r\n    let result = await Tesseract.recognize(buf.current!.toDataURL(), \"jpn\");\r\n    res.substat = {\r\n      value: result.data.text,\r\n      confidence: result.data.confidence,\r\n    };\r\n    cv.rectangle(trimmedImg, substat1p, substat2p, color, 2, cv.LINE_8, 0);\r\n  };\r\n\r\n  console.log(\"Start tesseract\");\r\n  await Promise.all([\r\n    fname(),\r\n    fpart(),\r\n    fmainKey(),\r\n    fmainValue(),\r\n    fstar(),\r\n    flevel(),\r\n    fsubstat(),\r\n  ]);\r\n  console.log(\"end tesseract\");\r\n  return res;\r\n};\r\n\r\nconst imshowTrimmed = (\r\n  ref: React.RefObject<HTMLCanvasElement>,\r\n  src: cv.Mat,\r\n  scale: number,\r\n  threshold: number,\r\n  p1: cv.Point,\r\n  p2: cv.Point\r\n) => {\r\n  let i = src.roi(new Rect(p1.x, p1.y, p2.x - p1.x, p2.y - p1.y));\r\n  cv.resize(i, i, new cv.Size(i.size().width * scale, i.size().height * scale));\r\n  cv.threshold(\r\n    i,\r\n    i,\r\n    Math.abs(threshold),\r\n    255,\r\n    threshold >= 0 ? cv.THRESH_BINARY : cv.THRESH_BINARY_INV\r\n  );\r\n  cv.imshow(ref.current!, i);\r\n};\r\n\r\nexport type ScanRes = {\r\n  value: string;\r\n  confidence: number;\r\n};\r\n\r\nexport type ScanResSlotKey = {\r\n  value: slotKeyType;\r\n  confidence: number;\r\n};\r\nexport type ScanResNum = {\r\n  value: number;\r\n  confidence: number;\r\n};\r\n\r\nexport type ScanResSetKey = {\r\n  key: setKeyType;\r\n  confidence: number;\r\n};\r\n\r\nexport type ScanResStat = {\r\n  key: statKeyType;\r\n  value: number;\r\n  confidence: number;\r\n};\r\n\r\nexport type ScanResStatKey = {\r\n  key: statKeyType;\r\n  confidence: number;\r\n};\r\n","import { Mat, MinMaxLoc, Rect } from \"@techstark/opencv-js\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport cv from \"@techstark/opencv-js\";\r\nimport Tesseract from \"tesseract.js\";\r\nimport { ArtifactScan, ScanRes2GOOD } from \"../../utils/func/artifactScan\";\r\nimport { Container, Typography } from \"@mui/material\";\r\n\r\nconst TemplateMatching = () => {\r\n  const targetImgRef = useRef<HTMLCanvasElement>(null);\r\n  const templateImgRef = useRef<HTMLCanvasElement>(null);\r\n  const slimImgRef = useRef<HTMLCanvasElement>(null);\r\n  const trimmedImgRef = useRef<HTMLCanvasElement>(null);\r\n  const nameImgRef = useRef<HTMLCanvasElement>(null);\r\n  const partImgRef = useRef<HTMLCanvasElement>(null);\r\n  const mainKeyImgRef = useRef<HTMLCanvasElement>(null);\r\n  const mainValueImgRef = useRef<HTMLCanvasElement>(null);\r\n  const starImgRef = useRef<HTMLCanvasElement>(null);\r\n  const levelImgRef = useRef<HTMLCanvasElement>(null);\r\n  const substatImgRef = useRef<HTMLCanvasElement>(null);\r\n  const dummyImgRef = useRef<HTMLCanvasElement>(null);\r\n  const [name, setName] = useState(\"name\");\r\n  const [part, setPart] = useState(\"part\");\r\n  const [mainKey, setMainKey] = useState(\"mainKey\");\r\n  const [mainValue, setMainValue] = useState(\"mainValue\");\r\n  const [star, setStar] = useState(\"star\");\r\n  const [level, setLevel] = useState(\"level\");\r\n  const [substat, setSubstat] = useState(\"substat\");\r\n  const [good, setGood] = useState(\"\");\r\n\r\n  const [img, setImg] = useState<Mat | null>(null);\r\n  const [templateImgs, setTemplateImgs] = useState<(Mat | null)[]>([\r\n    null,\r\n    null,\r\n  ]); //this will be error cv is not initialized at first\r\n\r\n  //PIPELINE\r\n  //target => [targetSM, [LEFT, RIGHT]] => [slim] => [trimmed](just have to know top corner?)\r\n  //if width > height\r\n  //targetSM, (1280, 720)\r\n  //else\r\n  //targetSM, preserve\r\n  //slim width: 272? padding: 20\r\n\r\n  let scale = 1.5; //small faster large precise\r\n\r\n  useEffect(() => {\r\n    if (img === null || templateImgs[0] !== null) return;\r\n    const loadTemplate = async () => {\r\n      let i1 = await imreadUrl(\"template/right.png\");\r\n      cv.resize(\r\n        i1,\r\n        i1,\r\n        new cv.Size(i1.size().width * scale, i1.size().height * scale)\r\n      );\r\n      let i2 = await imreadUrl(\"template/left.png\");\r\n      cv.resize(\r\n        i2,\r\n        i2,\r\n        new cv.Size(i2.size().width * scale, i2.size().height * scale)\r\n      );\r\n      let i3 = await imreadUrl(\"template/mid.png\");\r\n      cv.resize(\r\n        i3,\r\n        i3,\r\n        new cv.Size(i3.size().width * scale, i3.size().height * scale)\r\n      );\r\n      setTemplateImgs([i1, i2, i3]);\r\n      console.log(\"SET IMAGE\");\r\n    };\r\n    loadTemplate();\r\n  }, [img]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      img === null ||\r\n      templateImgs[0] === null ||\r\n      templateImgs[1] === null ||\r\n      templateImgs[2] === null\r\n    )\r\n      return;\r\n    const t = async () => {\r\n      let res = await ArtifactScan(\r\n        img,\r\n        scale,\r\n        templateImgs[1]!,\r\n        templateImgs[0]!,\r\n        templateImgs[2]!,\r\n        nameImgRef\r\n      );\r\n      console.log(res);\r\n      console.log(ScanRes2GOOD(res));\r\n      setGood(JSON.stringify(ScanRes2GOOD(res), null, 4));\r\n      //img will break after reading??\r\n    };\r\n\r\n    //visualScan(img, templateImgs[1]!, templateImgs[0]!, templateImgs[2]!);\r\n    t();\r\n\r\n    //visualScan(img, templateImgs[1]!, templateImgs[0]!, templateImgs[2]!);\r\n\r\n    //visualScan(img, templateImgs[1], templateImgs[0], templateImgs[2]);\r\n  }, [img, templateImgs]);\r\n\r\n  const visualScan = (\r\n    img_: cv.Mat,\r\n    left: cv.Mat,\r\n    right: cv.Mat,\r\n    mid: cv.Mat\r\n  ) => {\r\n    let img = new cv.Mat();\r\n    img_.copyTo(img);\r\n    let aspect = img.size().width / img.size().height;\r\n    cv.resize(img, img, new cv.Size(1280 * scale, (1280 * scale) / aspect)); //* RESIZE FOR FASTER RES,\r\n    console.log(img.size());\r\n    let color = new cv.Scalar(255, 0, 0, 255);\r\n\r\n    let dst = new cv.Mat();\r\n    let mask = new cv.Mat();\r\n    cv.matchTemplate(img, right, dst, cv.TM_CCOEFF_NORMED, mask);\r\n    let result = cv.minMaxLoc(dst, mask) as any as MinMaxLoc;\r\n    let maxPoint = result.maxLoc;\r\n\r\n    let point = new cv.Point(maxPoint.x + right.cols, maxPoint.y + right.rows);\r\n    cv.rectangle(img, maxPoint, point, color, 2, cv.LINE_8, 0);\r\n    console.log(\"img 0 match\");\r\n\r\n    cv.matchTemplate(img, left, dst, cv.TM_CCOEFF, mask);\r\n    result = cv.minMaxLoc(dst, mask) as any as MinMaxLoc;\r\n    let maxPoint2 = result.maxLoc;\r\n\r\n    let point2 = new cv.Point(maxPoint2.x + left.cols, maxPoint2.y + left.rows);\r\n    cv.rectangle(img, maxPoint2, point2, color, 2, cv.LINE_8, 0);\r\n    console.log(\"img 1 match\");\r\n\r\n    cv.imshow(targetImgRef.current!, img);\r\n    cv.imshow(templateImgRef.current!, right);\r\n\r\n    let slimRect = new cv.Rect(\r\n      maxPoint2.x,\r\n      0,\r\n      point.x - maxPoint2.x,\r\n      img.size().height\r\n    );\r\n    let slimImg = img.roi(slimRect);\r\n    //*RESIZE AFTER CLOP!!!!!!!!!\r\n    aspect = slimImg.size().width / slimImg.size().height;\r\n\r\n    cv.resize(\r\n      slimImg,\r\n      slimImg,\r\n      new cv.Size(352 * scale, (352 * scale) / aspect)\r\n    );\r\n\r\n    cv.matchTemplate(slimImg, mid, dst, cv.TM_CCOEFF, mask);\r\n    result = cv.minMaxLoc(dst, mask) as any as MinMaxLoc;\r\n    maxPoint = result.maxLoc;\r\n\r\n    point = new cv.Point(maxPoint.x + mid.cols, maxPoint.y + mid.rows);\r\n    cv.rectangle(slimImg, maxPoint, point, color, 2, cv.LINE_8, 0);\r\n\r\n    console.log(\"slimmed\");\r\n    cv.imshow(slimImgRef.current!, slimImg);\r\n\r\n    let midSeparator = maxPoint.y + mid.rows / 2;\r\n    let topHalfHeight = 189;\r\n    let topHalfBottom = 156;\r\n    let topHalfR = new cv.Rect(\r\n      12,\r\n      midSeparator - topHalfHeight * scale,\r\n      328 * scale,\r\n      (topHalfHeight + topHalfBottom) * scale\r\n    );\r\n    let trimmedImg = slimImg.roi(topHalfR);\r\n    cv.cvtColor(trimmedImg, trimmedImg, cv.COLOR_BGR2GRAY);\r\n\r\n    console.log(\"trimmed\");\r\n\r\n    let name1p = new cv.Point(17 * scale, 6 * scale);\r\n    let name2p = new cv.Point((17 + 295) * scale, (6 + 26) * scale);\r\n    let part1p = new cv.Point(16 * scale, 46 * scale);\r\n    let part2p = new cv.Point((16 + 130) * scale, (46 + 18) * scale);\r\n    let mainKey1p = new cv.Point(16 * scale, 100 * scale);\r\n    let mainKey2p = new cv.Point((16 + 130) * scale, (100 + 18) * scale);\r\n    let mainValue1p = new cv.Point(16 * scale, 118 * scale);\r\n    let mainValue2p = new cv.Point((16 + 102) * scale, (118 + 32) * scale);\r\n    let star1p = new cv.Point(16 * scale, 156 * scale);\r\n    let star2p = new cv.Point((16 + 116) * scale, (156 + 24) * scale);\r\n    let level1p = new cv.Point(24 * scale, 208 * scale);\r\n    let level2p = new cv.Point((24 + 32) * scale, (208 + 16) * scale);\r\n    let substat1p = new cv.Point(32 * scale, 237 * scale);\r\n    let substat2p = new cv.Point((32 + 198) * scale, (237 + 106) * scale);\r\n\r\n    imshowTrimmed(mainKeyImgRef, trimmedImg, 1, -135, mainKey1p, mainKey2p);\r\n    imshowTrimmed(\r\n      mainValueImgRef,\r\n      trimmedImg,\r\n      0.75,\r\n      -180,\r\n      mainValue1p,\r\n      mainValue2p\r\n    );\r\n    imshowTrimmed(starImgRef, trimmedImg, 1, -150, star1p, star2p);\r\n    imshowTrimmed(levelImgRef, trimmedImg, 1, -150, level1p, level2p);\r\n    imshowTrimmed(substatImgRef, trimmedImg, 1, 140, substat1p, substat2p);\r\n    console.log(\"showTextImg\");\r\n\r\n    const fname = async () => {\r\n      imshowTrimmed(nameImgRef, trimmedImg, 0.75, -180, name1p, name2p);\r\n      let result = await Tesseract.recognize(\r\n        nameImgRef.current!.toDataURL(),\r\n        \"jpn\"\r\n      );\r\n      setName(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(trimmedImg, name1p, name2p, color, 2, cv.LINE_8, 0);\r\n    };\r\n    const fpart = async () => {\r\n      imshowTrimmed(partImgRef, trimmedImg, 1, -180, part1p, part2p);\r\n      let result = await Tesseract.recognize(\r\n        partImgRef.current!.toDataURL(),\r\n        \"jpn\"\r\n      );\r\n      setPart(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(trimmedImg, part1p, part2p, color, 2, cv.LINE_8, 0);\r\n    };\r\n\r\n    const fmainKey = async () => {\r\n      let result = await Tesseract.recognize(\r\n        mainKeyImgRef.current!.toDataURL(),\r\n        \"jpn\"\r\n      ); //nograyscale\r\n      setMainKey(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(trimmedImg, mainKey1p, mainKey2p, color, 2, cv.LINE_8, 0);\r\n    };\r\n    const fmainValue = async () => {\r\n      let result = await Tesseract.recognize(\r\n        mainValueImgRef.current!.toDataURL()\r\n      );\r\n      setMainValue(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(\r\n        trimmedImg,\r\n        mainValue1p,\r\n        mainValue2p,\r\n        color,\r\n        2,\r\n        cv.LINE_8,\r\n        0\r\n      );\r\n    };\r\n\r\n    const fstar = async () => {\r\n      let result = await Tesseract.recognize(\r\n        starImgRef.current!.toDataURL(),\r\n        \"chi_tra\"\r\n      );\r\n      setStar(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(trimmedImg, star1p, star2p, color, 2, cv.LINE_8, 0);\r\n    };\r\n\r\n    const flevel = async () => {\r\n      let result = await Tesseract.recognize(levelImgRef.current!.toDataURL()); //nograyscale\r\n      setLevel(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(trimmedImg, level1p, level2p, color, 2, cv.LINE_8, 0);\r\n    };\r\n\r\n    const fsubstat = async () => {\r\n      let result = await Tesseract.recognize(\r\n        substatImgRef.current!.toDataURL(),\r\n        \"jpn\"\r\n      );\r\n      setSubstat(`${result.data.text} : ${result.data.confidence}`);\r\n      cv.rectangle(trimmedImg, substat1p, substat2p, color, 2, cv.LINE_8, 0);\r\n    };\r\n\r\n    const t = async () => {\r\n      await Promise.all([\r\n        fname(),\r\n        fpart(),\r\n        fmainKey(),\r\n        fmainValue(),\r\n        fstar(),\r\n        flevel(),\r\n        fsubstat(),\r\n      ]);\r\n      cv.imshow(trimmedImgRef.current!, trimmedImg);\r\n    };\r\n    t();\r\n  };\r\n\r\n  const imreadUrl = async (url: string): Promise<Mat> => {\r\n    let e = await loadImage(url);\r\n    console.log(e.target);\r\n    return cv.imread(e.target as HTMLElement);\r\n  };\r\n\r\n  const loadImage = (src: string): Promise<Event> => {\r\n    return new Promise((resolve, reject) => {\r\n      const i = new Image();\r\n      i.onload = (e) => resolve(e);\r\n      i.onerror = (e) => reject(e);\r\n      i.src = src;\r\n    });\r\n  };\r\n\r\n  const imshowTrimmed = (\r\n    ref: React.RefObject<HTMLCanvasElement>,\r\n    src: cv.Mat,\r\n    scale: number,\r\n    threshold: number,\r\n    p1: cv.Point,\r\n    p2: cv.Point\r\n  ) => {\r\n    let i = src.roi(new Rect(p1.x, p1.y, p2.x - p1.x, p2.y - p1.y));\r\n    cv.resize(\r\n      i,\r\n      i,\r\n      new cv.Size(i.size().width * scale, i.size().height * scale)\r\n    );\r\n    cv.threshold(\r\n      i,\r\n      i,\r\n      Math.abs(threshold),\r\n      255,\r\n      threshold >= 0 ? cv.THRESH_BINARY : cv.THRESH_BINARY_INV\r\n    );\r\n    cv.imshow(ref.current!, i);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ marginTop: \"30px\" }}>\r\n        <span style={{ marginRight: \"10px\" }}>Select an target file:</span>\r\n        <input\r\n          type=\"file\"\r\n          name=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={async (e) => {\r\n            if (e.target.files && e.target.files[0]) {\r\n              //setImgUrl(URL.createObjectURL(e.target.files[0]));\r\n              let i = await imreadUrl(URL.createObjectURL(e.target.files[0]));\r\n              setImg(i);\r\n\r\n              //processImage(e.target.files[0].arrayBuffer());\r\n              //processImageUrl(URL.createObjectURL(e.target.files[0]));\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div style={{ marginTop: \"30px\" }}>\r\n        <span style={{ marginRight: \"10px\" }}>\r\n          Open console.log to check result\r\n        </span>\r\n      </div>\r\n\r\n      <Container maxWidth=\"xs\">\r\n        <Typography textAlign=\"left\">{good}</Typography>\r\n      </Container>\r\n\r\n      <canvas ref={dummyImgRef} style={{ display: \"none\" }} />\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{name}</div>\r\n        <canvas ref={nameImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{part}</div>\r\n        <canvas ref={partImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{mainKey}</div>\r\n        <canvas ref={mainKeyImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{mainValue}</div>\r\n        <canvas ref={mainValueImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{star}</div>\r\n        <canvas ref={starImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{level}</div>\r\n        <canvas ref={levelImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The text image ↓↓↓{substat}</div>\r\n        <canvas ref={substatImgRef} />\r\n      </div>\r\n\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The template image ↓↓↓</div>\r\n        <canvas ref={templateImgRef} width={1000} />\r\n      </div>\r\n\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The target image ↓↓↓</div>\r\n        <canvas ref={targetImgRef} style={{ maxWidth: \"80vw\" }} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The slim image ↓↓↓</div>\r\n        <canvas ref={slimImgRef} />\r\n      </div>\r\n      <div className=\"image-card\">\r\n        <div style={{ margin: \"10px\" }}>↓↓↓ The trimmed image ↓↓↓</div>\r\n        <canvas ref={trimmedImgRef} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TemplateMatching;\r\n"],"names":["similarity","s1","s2","longer","shorter","length","longerLength","editDistance","toLowerCase","costs","Array","i","lastValue","j","newValue","charAt","Math","min","setKey","slotKey","statDef","hp","weight","abri","name","en","ja","table","hp_","atk","atk_","def","def_","eleMas","enerRech_","heal_","critRate_","critDMG_","physical_dmg_","anemo_dmg_","geo_dmg_","electro_dmg_","hydro_dmg_","pyro_dmg_","cryo_dmg_","dendro_dmg_","ERR","icon","undefined","statKey","str2artifactSet","str","lang","maxSim","key_","part_","forEach","key","a","artifacts","part","sim","confidence","str2stats","strs","split","filter","str_","targets","replace","includes","push","map","str2stat","datas","console","log","substring","value_","replaceAll","replaceItem","key_i","value","Number","ScanRes2GOOD","scanned","rarity","level","mainstatKey","substats","substat","ArtifactScan","src","scale","left","right","mid","buf","ArtifactScanStr","char","res","set","star","mainstat","mainKey","mainValue","src_","cv","copyTo","aspect","size","width","height","color","dst","mask","result","maxPoint","maxLoc","point","x","cols","y","rows","maxPoint2","point2","slimRect","slimImg","roi","midSeparator","topHalfR","trimmedImg","name1p","name2p","part1p","part2p","mainKey1p","mainKey2p","mainValue1p","mainValue2p","star1p","star2p","level1p","level2p","substat1p","substat2p","fname","imshowTrimmed","Tesseract","current","toDataURL","data","text","fpart","fmainKey","fmainValue","fstar","flevel","fsubstat","Promise","all","ref","threshold","p1","p2","Rect","abs","targetImgRef","useRef","templateImgRef","slimImgRef","trimmedImgRef","nameImgRef","partImgRef","mainKeyImgRef","mainValueImgRef","starImgRef","levelImgRef","substatImgRef","dummyImgRef","useState","good","setGood","img","setImg","templateImgs","setTemplateImgs","useEffect","loadTemplate","imreadUrl","i1","i2","i3","t","JSON","stringify","url","loadImage","e","target","resolve","reject","Image","onload","onerror","style","marginTop","marginRight","type","accept","onChange","files","URL","createObjectURL","Container","maxWidth","Typography","textAlign","display","className","margin"],"sourceRoot":""}